(this["webpackJsonpinterior-configurator"]=this["webpackJsonpinterior-configurator"]||[]).push([[0],{74:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),c=n.n(r),l=n(9),o=n.n(l),u=(n(74),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)}))}),i=n(29),s=n(22),b=n(14),d=n(38);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"open",floor:"light",wall:"light"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mp4",n=Object(s.a)({type:"open",floor:"light",wall:"light"},e);return"/videos/new2/".concat(n.type,"_").concat(n.floor,"_").concat(n.wall,".").concat(t)}var f=n(43),v=n(128),O=n(122),p=n(129),g=n(126),h=n(130),m=n(124),x=n(125),y=n(53),w=n.n(y),S=function(e){e.videos,e.supportWebm,e.preparedVideos;var t=e.videoUrl,n=Object(r.useState)(""),c=Object(b.a)(n,2),l=c[0],o=c[1],u=Object(r.useRef)(0),i=Object(r.useRef)(null),s=Object(r.useState)(null),d=Object(b.a)(s,2),j=d[0],f=d[1],O=Object(r.useState)(!0),p=Object(b.a)(O,2),g=p[0],h=p[1];Object(r.useEffect)((function(){m(),o(t)}),[t]);var m=function(){if(i.current){if(!i.current.getInternalPlayer())return;var e=i.current.getInternalPlayer(),t=document.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");if(n){n.drawImage(i.current.getInternalPlayer(),0,0,t.width,t.height);var a=t.toDataURL("image/jpeg");f(a)}}};return Object(a.jsx)("div",{style:{maxWidth:"960px",margin:"0 auto"},children:Object(a.jsxs)(v.a,{mt:1,position:"relative",children:[Object(a.jsx)(w.a,{width:"100%",height:"auto",ref:i,url:l,muted:!0,loop:!0,playsinline:!0,playing:g,progressInterval:10,onReady:function(){if(i.current){var e=i.current.getInternalPlayer();e&&e.addEventListener("loadedmetadata",(function(){i.current&&i.current.seekTo(u.current,"seconds")}))}},onSeek:function(){h(!0)},onPlay:function(){f(null)},onProgress:function(e){var t=e.playedSeconds;t>0&&(u.current=t)}}),j&&Object(a.jsx)("img",{alt:"screen",style:{position:"absolute",top:0,left:0,width:"100%",height:"auto"},src:j})]})})};function k(){var e=Object(d.a)(["\n  display: flex;\n"]);return k=function(){return e},e}var P=f.a.div(k()),I=function(e){var t=e.videos,n=e.videoState,c=e.updateSet,l=e.goNext,o=void 0===l?null:l,u=Object(r.useState)(null),d=Object(b.a)(u,2),f=(d[0],d[1],Object(r.useState)(!1)),y=Object(b.a)(f,2),w=y[0],k=y[1],I=Object(r.useState)([]),T=Object(b.a)(I,2),E=T[0],L=T[1],R=Object(r.useState)({}),C=Object(b.a)(R,2),M=C[0],W=C[1],D=Object(r.useMemo)((function(){return Object.values(M).reduce((function(e,t){return e+t}),0)/Object.keys(M).length*100}),[M]);Object(r.useEffect)((function(){document.createElement("video").canPlayType("video/webm");var e=t.map((function(e){return e.values.map((function(e){return e.value}))})),a=(2===e.length?[[e[0][0],e[1][0]],[e[0][0],e[1][1]],[e[0][1],e[1][0]],[e[0][1],e[1][1]]].map((function(e){return{type:e[0],floor:e[1],wall:n.wall}})):[e[0][0],e[0][1]].map((function(e){return{type:n.type,floor:n.floor,wall:e}}))).map((function(e,t){return new Promise((function(n){var a=new XMLHttpRequest;a.open("GET",j(e),!0),a.responseType="blob",a.onprogress=function(e){W((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(i.a)({},t,e.loaded/e.total))}))},a.onload=function(){if(200===this.status){var t=URL.createObjectURL(this.response);n({key:j(e),value:t})}},a.send()}))}));Promise.all(a).then((function(e){k(!0),L(e)}))}),[]);var U=Object(r.useMemo)((function(){return console.log(n),console.log(j(n)),j(n)}),[n]),F=Object(r.useMemo)((function(){var e=E.find((function(e){return e.key===U}));return e?e.value:U}),[U,E]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)(P,{children:[t.map((function(e){return Object(a.jsx)(v.a,{mx:1,children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)(p.a,{children:e.label}),Object(a.jsx)(g.a,{value:n[e.name],onChange:function(t){return c(e.name,t.target.value)},children:e.values.map((function(e){return Object(a.jsx)(h.a,{value:e.value,children:e.label},e.label)}))})]})},e.label)})),o&&Object(a.jsx)(m.a,{color:"primary",variant:"contained",onClick:function(){return o()},children:"Weiter"})]}),Object(a.jsxs)(v.a,{mt:5,children:[!w&&Object(a.jsx)(x.a,{variant:"determinate",value:D}),w&&Object(a.jsx)(S,{videos:t,supportWebm:!1,preparedVideos:E,videoUrl:F})]})]})};function T(){var e=Object(d.a)(["\n  max-width: 960px;\n  margin: 20px auto 0;\n"]);return T=function(){return e},e}var E=f.a.div(T()),L=[{name:"type",label:"Grundriss",values:[{label:"Ohne Abtrennung",value:"open"},{label:"Mit Abtrennung",value:"close"}]},{name:"floor",label:"Boden",values:[{label:"Hell",value:"light"},{label:"Dunkel",value:"dark"}]},{name:"wall",label:"Wand- und Deckelbel\xe4ge",values:[{label:"Hell ",value:"light"},{label:"Dunkel",value:"dark"}]}],R=function(){var e=Object(r.useState)("stageOne"),t=Object(b.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)({type:"open",floor:"light",wall:"light"}),o=Object(b.a)(l,2),u=o[0],d=o[1],j=function(e,t){d((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(i.a)({},e,t))}))};return Object(a.jsx)("div",{children:Object(a.jsxs)(E,{children:["stageOne"===n&&Object(a.jsx)(I,{videos:L.slice(0,2),videoState:u,updateSet:j,goNext:function(){c("stageTwo")}}),"stageTwo"===n&&Object(a.jsx)(I,{videos:L.slice(2,3),videoState:u,updateSet:j})]})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(R,{})}),document.getElementById("root")),u()}},[[96,1,2]]]);
//# sourceMappingURL=main.c8aa275f.chunk.js.map